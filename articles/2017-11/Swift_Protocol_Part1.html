<!DOCTYPE html>
<html lang="ko">

  <head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5VLL8HQ');</script>
  <!-- End Google Tag Manager -->
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5VL9R6T5ZN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-5VL9R6T5ZN');
  </script>

  <!-- encoding -->
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <!-- Primary Meta Tags -->
  <title>Swift Protocol - Part1 - hcn1519 Dev Post</title>
  <meta name="author" content="Changnam Hong">
  <meta name="title" content="Swift Protocol - Part1 - hcn1519 Dev Post">
  <meta name="description" content="Swift의 Protocol의 기본 개념 및 사용법과 delegation 패턴에 대해 알아봅니다.">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#1d1d1d" media="(prefers-color-scheme: dark)">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Swift Protocol - Part1">
  <meta property="og:image" content="/public/assets/swiftLogo.jpg">
  <meta property="og:description" content="Swift의 Protocol의 기본 개념 및 사용법과 delegation 패턴에 대해 알아봅니다.">

  <!-- CSS -->
  <link rel="stylesheet" href="/public/sass/blogTheme.scss.css" async>
  <link rel="stylesheet" href="/public/sass/menu.scss.css" async>
  <link rel="stylesheet" href="/public/sass/syntax.scss.css" async>
  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="57x57" href="/public/favicon/apple-icon-57x57.png" async>
  <link rel="apple-touch-icon" sizes="60x60" href="/public/favicon/apple-icon-60x60.png" async>
  <link rel="apple-touch-icon" sizes="72x72" href="/public/favicon/apple-icon-72x72.png" async>
  <link rel="apple-touch-icon" sizes="76x76" href="/public/favicon/apple-icon-76x76.png" async>
  <link rel="apple-touch-icon" sizes="114x114" href="/public/favicon/apple-icon-114x114.png" async>
  <link rel="apple-touch-icon" sizes="120x120" href="/public/favicon/apple-icon-120x120.png" async>
  <link rel="apple-touch-icon" sizes="144x144" href="/public/favicon/apple-icon-144x144.png" async>
  <link rel="apple-touch-icon" sizes="152x152" href="/public/favicon/apple-icon-152x152.png" async>
  <link rel="apple-touch-icon" sizes="180x180" href="/public/favicon/apple-icon-180x180.png" async>
  <link rel="icon" type="image/png" sizes="192x192"  href="/public/favicon/android-icon-192x192.png" async>
  <link rel="icon" type="image/png" sizes="32x32" href="/public/favicon/favicon-32x32.png" async>
  <link rel="icon" type="image/png" sizes="96x96" href="/public/favicon/favicon-96x96.png" async>
  <link rel="icon" type="image/png" sizes="16x16" href="/public/favicon/favicon-16x16.png" async>
  <link rel="manifest" href="/public/favicon/manifest.json" async>
  
  <link type="application/atom+xml" rel="alternate" href="https://hcn1519.github.io/feed.xml" title="hcn1519 Dev Post" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml" async>

</head>


  <body>
      <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5VLL8HQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="wrap">
      <nav class="menu">
  <div class="menu-container">
    <ul class="menu-list">
      <li class="menu-item">
        <a class="menu-link" href="/">Home</a>
      </li>
      

      
      
        
          
        
      
        
          
        
      
        
          
            <li class="menu-item">
              <a class="menu-link" href="/about">About</a>
            </li>
          
        
      
        
          
            <li class="menu-item">
              <a class="menu-link" href="/archives/">Archives</a>
            </li>
          
        
      
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
      
        
          
            <li class="menu-item">
              <a class="menu-link" href="/tags/">Tags</a>
            </li>
          
        
      
    </ul>
  </div>

  <a class="menu-toggle">
    <div class="menu-hamburger"></div>
  </a>
</nav>

      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="" title="Home">CNH</a>
            <small>Dev Post</small>
            <span style="font-size: medium;text-align: right;float: right;margin-top: 3.5px;">
              <small>
              
              <a href="/en">Read in English</a>
              
              </small>
            </span>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h2 class="post-title">Swift Protocol - Part1</h2>
  <span class="post-date">11 Nov 2017</span>
  
  <div class="post-image-feature">
    <img class="feature-image" src=
    
    "/public/assets/swiftLogo.jpg"
    
    alt="Swift Protocol - Part1 feature image">

    
  </div><!-- /.image-wrap -->
  

  

  

  
  

        
  
  
  <p>이번 포스팅에서는 Swift의 <code class="language-plaintext highlighter-rouge">Protocol</code> 기본 개념 및 사용법과 이에 기반한 delegation 패턴에 대해 알아 보고자 합니다. 먼저 Protocol의 정의부터 살펴보겠습니다.</p>

<div class="message">
A protocol defines a blueprint of methods, properties, and other requirements that suit a particular task or piece of functionality.
</div>

<p>Protocol은 자신을 따르는 어떤 객체가 구현해야 하는 <strong>필요 요건</strong> 을 서술한 것입니다.</p>
<ol>
  <li>여기서 객체가 의미하는 것은 <code class="language-plaintext highlighter-rouge">class</code> 뿐만 아니라, <code class="language-plaintext highlighter-rouge">struct</code>, <code class="language-plaintext highlighter-rouge">enum</code>을 포함합니다.</li>
  <li>객체들이 Protocol을 따르게 되면 컴파일시 이 필요 요건을 충족하는 지 확인합니다.</li>
</ol>

<p>이 때, 객체들이 Protocol을 <code class="language-plaintext highlighter-rouge">따른다</code>는 표현을 썼는데, 이는 애플의 스위프트 공식 가이드 문서에서 <code class="language-plaintext highlighter-rouge">conform</code>이라는 단어로 표현됩니다. 또한 이와 같이 나오는 단어로 <code class="language-plaintext highlighter-rouge">adopt</code>가 있는데 이는 <code class="language-plaintext highlighter-rouge">채택하다</code>라는 의미로 사용됩니다. 예를 들면, 어떤 프로토콜을 따르는 객체는 해당 프로토콜을 채택하였다고 표현됩니다.</p>

<p>자동차라는 프로토콜을 만든다고 생각해보겠습니다. 자동차는 자동차이기 위해 필수적으로 가지고 있는 것이 있습니다. 자동차면 엔진이 필요하고, 연비 수치가 있을 것이고, 바퀴가 있을 것입니다. 이러한 것들을 프로토콜에 담아서 자동차라면 모름지기 가져야 하는 요소를 하나의 프로토콜로 작성할 수 있습니다. 그리고 미니쿠퍼라는 구조체를 만들 때, 그 구조체가 자동차 프로토콜을 따르게 만들 수 있습니다.</p>

<h2 id="1-protocol-syntax">1. Protocol Syntax</h2>
<p>Protocol은 다음과 같은 문법으로 사용됩니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">protocol</span> <span class="n">프로토콜1</span> <span class="p">{</span>
  <span class="c1">// 프로토콜1의 필수 구현 내용</span>
<span class="p">}</span>
<span class="kd">protocol</span> <span class="n">프로토콜2</span> <span class="p">{</span>
  <span class="c1">// 프로토콜2의 필수 구현 내용</span>
<span class="p">}</span>
<span class="kd">struct</span> <span class="nv">구조체1</span><span class="p">:</span> <span class="n">프로토콜1</span> <span class="p">{</span>
  <span class="c1">// 프로토콜1의 필수 구현 내용을 충족해야 합니다.</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nv">어떤_클래스</span><span class="p">:</span> <span class="n">부모클래스</span><span class="p">,</span> <span class="n">프로토콜1</span><span class="p">,</span> <span class="n">프로토콜2</span> <span class="p">{</span>
  <span class="c1">// 프로토콜1과 프로토콜2의 구현 내용 충족</span>
  <span class="c1">// 부모클래스 상속</span>
<span class="p">}</span></code></pre></figure>

<p>Protocol은 <code class="language-plaintext highlighter-rouge">class</code> 상속과 유사한 형태로 사용됩니다. 다만 Swift에서 하나의 <code class="language-plaintext highlighter-rouge">class</code>만 상속할 수 있는 것을 달리 객체는 복수의 Protocol을 따를 수 있습니다. 또한, 특정 <code class="language-plaintext highlighter-rouge">class</code>는 부모클래스를 상속하면서 Protocol도 따르는 형태로 구현될 수도 있습니다.</p>

<h2 id="2-requirements">2. Requirements</h2>

<p>Protocol을 따르는 객체가 충족시켜야하는 요건이라는 것은 일반적으로 <strong>특정 프로퍼티 혹은 메소드를 필수로 구현해야 하는 것</strong> 과 그 의미가 거의 같습니다. 그렇기 때문에 Protocol에는 이를 따르는 객체들이 구현해야 할 프로퍼티와 메소드의 <strong>조건</strong> 이 쓰여져야 합니다.</p>

<h3 id="property-requirements">Property Requirements</h3>

<p>먼저 Property가 Protocol에서 어떻게 쓰여야하는지 살펴 보겠습니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Car</code> 프로토콜은 어떤 객체가 자동차이기 위해 필요한 프로퍼티들을 필수적으로 서술할 것을 요구합니다.</li>
</ul>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">enum</span> <span class="kt">Fuel</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">oil</span>
    <span class="k">case</span> <span class="n">electronic</span>
<span class="p">}</span>

<span class="kd">protocol</span> <span class="kt">Car</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">maxSpeed</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">engineType</span><span class="p">:</span> <span class="kt">Fuel</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">navigation</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">stateOfCar</span><span class="p">:</span> <span class="kt">CarState</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<ol>
  <li>Protocol에서 Property는 모두 <code class="language-plaintext highlighter-rouge">var</code>로 선언됩니다.(어떤 프로퍼티를 immutable하게 선언하고 싶다면 get-only 프로퍼티로 선언하고 사용하면 됩니다.)</li>
  <li>Protocol은 어떤 <strong>조건</strong> 이기 때문에, 변수의 이름과 타입만 쓰고 변수의 값은 쓰지 않습니다.</li>
  <li>Protocol은 변수가 <code class="language-plaintext highlighter-rouge">gettable</code>(<code class="language-plaintext highlighter-rouge">{ get }</code>) 여부, <code class="language-plaintext highlighter-rouge">settable</code>(<code class="language-plaintext highlighter-rouge">{ get set }</code>, set-only는 존재하지 않습니다.) 여부를 위의 예시처럼 표현합니다.</li>
  <li>Protocol끼리도 서로 conform할 수 있습니다. 이 때, 따르는 프로토콜을 참조하는 객체는 모든 프로퍼티를 구현해주어야 합니다.</li>
</ol>

<p>위의 Protocol을 따르는 객체를 생성하면 다음과 같이 될 수 있습니다.</p>

<ul>
  <li>여기서 <code class="language-plaintext highlighter-rouge">FeatureOfCar</code> 구조체는 <code class="language-plaintext highlighter-rouge">Car</code> 프로토콜을 따르고, 이에 따라 <code class="language-plaintext highlighter-rouge">Car</code> 프로토콜이 요구하는 프로퍼티들을 구현해야 합니다.</li>
</ul>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="kt">FeatureOfCar</span><span class="p">:</span> <span class="kt">Car</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">maxSpeed</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">var</span> <span class="nv">engineType</span><span class="p">:</span> <span class="kt">Fuel</span>
    <span class="k">var</span> <span class="nv">navigation</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">stateOfCar</span><span class="p">:</span> <span class="kt">CarState</span> <span class="p">{</span>
        <span class="k">didSet</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"자동차의 상태가 변경됩니다."</span><span class="p">,</span> <span class="k">self</span><span class="o">.</span><span class="n">stateOfCar</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 id="method-requirements">Method Requirements</h3>

<p>메소드 같은 경우에도 Protocol에서는 메소드의 body를 작성하지 않고, 함수명, 파라미터, 리턴 타입만을 명시합니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">enum</span> <span class="kt">Fuel</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">oil</span>
    <span class="k">case</span> <span class="n">electronic</span>
<span class="p">}</span>

<span class="kd">protocol</span> <span class="kt">Car</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">maxSpeed</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">engineType</span><span class="p">:</span> <span class="kt">Fuel</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">navigation</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">stateOfCar</span><span class="p">:</span> <span class="kt">CarState</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">isRunning</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">FeatureOfCar</span><span class="p">:</span> <span class="kt">Car</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">maxSpeed</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">var</span> <span class="nv">engineType</span><span class="p">:</span> <span class="kt">Fuel</span>
    <span class="k">var</span> <span class="nv">navigation</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>

    <span class="k">var</span> <span class="nv">stateOfCar</span><span class="p">:</span> <span class="kt">CarState</span> <span class="p">{</span>
        <span class="k">didSet</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"자동차의 상태가 변경됩니다."</span><span class="p">,</span> <span class="k">self</span><span class="o">.</span><span class="n">stateOfCar</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">isRunning</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">mileage</span> <span class="o">+=</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>위의 예시에서 <code class="language-plaintext highlighter-rouge">isRunning</code>이라는 메소드를 <code class="language-plaintext highlighter-rouge">Car</code> 프로토콜에 추가하였습니다. 이 때 <code class="language-plaintext highlighter-rouge">isRunning</code>은 객체의 프로퍼티를 변경하기 때문에 mutating 키워드를 써주어야 합니다.</p>

<h2 id="3-protocol-type">3. Protocol Type</h2>

<p>프로토콜은 데이터 타입으로도 사용될 수 있습니다. 이 말은 프로토콜이 우리가 사용하는 <code class="language-plaintext highlighter-rouge">Int</code>, <code class="language-plaintext highlighter-rouge">String</code> 같은 자리에 올 수 있다는 것을 의미합니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// 위의 예시의 Car Protocol을 사용합니다.</span>
<span class="k">let</span> <span class="nv">feature</span><span class="p">:</span> <span class="kt">Car</span></code></pre></figure>

<p>여기서 생기는 의문이 있습니다. 그럼 프로토콜 타입의 변수에는 무엇이 와야하는 것인가요? 단순하게 생각하면 <code class="language-plaintext highlighter-rouge">Car</code> 인스턴스가 올 수 있지만, 프로토콜로는 인스턴스를 생성할 수 없습니다. 프로토콜 타입의 변수에는 그 프로토콜을 따르는 인스턴스가 올 수 있습니다.</p>

<p>코드에서 이 개념을 알아보겠습니다.</p>

<ul>
  <li>여기서는 <code class="language-plaintext highlighter-rouge">Car</code> 프로토콜 타입을 프로퍼티로 가지고 있는(따르는 것이 아닙니다.) <code class="language-plaintext highlighter-rouge">MiniCooper</code> 구조체를 생성하였습니다.</li>
</ul>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">enum</span> <span class="kt">Fuel</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">oil</span>
    <span class="k">case</span> <span class="n">electronic</span>
<span class="p">}</span>

<span class="kd">protocol</span> <span class="kt">Car</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">maxSpeed</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">engineType</span><span class="p">:</span> <span class="kt">Fuel</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">navigation</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">stateOfCar</span><span class="p">:</span> <span class="kt">CarState</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">isRunning</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">FeatureOfCar</span><span class="p">:</span> <span class="kt">Car</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">maxSpeed</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">var</span> <span class="nv">engineType</span><span class="p">:</span> <span class="kt">Fuel</span>
    <span class="k">var</span> <span class="nv">navigation</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>

    <span class="k">var</span> <span class="nv">stateOfCar</span><span class="p">:</span> <span class="kt">CarState</span> <span class="p">{</span>
        <span class="k">didSet</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"자동차의 상태가 변경됩니다."</span><span class="p">,</span> <span class="k">self</span><span class="o">.</span><span class="n">stateOfCar</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">isRunning</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">mileage</span> <span class="o">+=</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">MiniCooper</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">feature</span><span class="p">:</span> <span class="kt">Car</span>
<span class="p">}</span></code></pre></figure>

<p>위의 예시에서 <code class="language-plaintext highlighter-rouge">MiniCooper</code> struct는 <code class="language-plaintext highlighter-rouge">Car</code> 프로토콜 타입의 변수 <code class="language-plaintext highlighter-rouge">feature</code>를 갖습니다. 이 <code class="language-plaintext highlighter-rouge">feature</code>의 자리에는 <code class="language-plaintext highlighter-rouge">Car</code>을 따르는 객체 중 무엇이든 올 수 있습니다. 그래서 여기서는 <code class="language-plaintext highlighter-rouge">FeatureOfCar</code> 구조체가 <code class="language-plaintext highlighter-rouge">Car</code> 프로토콜을 따르기 때문에, <code class="language-plaintext highlighter-rouge">FeatureOfCar</code>의 인스턴스인 <code class="language-plaintext highlighter-rouge">miniCooperFeature</code>가 <code class="language-plaintext highlighter-rouge">feature</code>의 자리에 올 수 있습니다.</p>

<div class="message">
  객체가 어떤 프로토콜을 사용하는 것은 해당 프로토콜을 따르는 방법과 프로토콜을 프로퍼티로 가지고 있는 방법이 있습니다. 즉, 객체 스스로가 해당 프로토콜을 요구조건을 만족하도록 모든 프로퍼티, 메소드들을 구현할 수도 있고(따르는 방법), 프로토콜을 프로퍼티로만 가질 수도 있는 것(가지는 방법)입니다.
</div>

<h2 id="4-프로토콜의-다형성과-value-type의-확장">4. 프로토콜의 다형성과 Value Type의 확장</h2>

<p>앞선 예제에서 프로토콜 타입의 데이터에는 프로토콜을 따르는 어떤 객체든 올 수 있다는 것을 파악하였습니다. 이 속성은 value type의 확장에 있어서 상당히 중요한 속성입니다. 아래 코드를 살펴보겠습니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="kt">FeatureOfCar</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span>
<span class="p">}</span>
<span class="kd">struct</span> <span class="kt">MiniCooper1</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">feature</span><span class="p">:</span> <span class="kt">FeatureOfCar</span>
<span class="p">}</span>

<span class="kd">protocol</span> <span class="kt">Car</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
<span class="p">}</span>
<span class="kd">struct</span> <span class="kt">MiniCooper2</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">feature</span><span class="p">:</span> <span class="kt">Car</span>
<span class="p">}</span></code></pre></figure>

<p>위의 코드에서 <code class="language-plaintext highlighter-rouge">MiniCooper1</code>는 <code class="language-plaintext highlighter-rouge">FeatureOfCar</code>의 구조체를 프로퍼티로 가집니다. <code class="language-plaintext highlighter-rouge">MiniCooper2</code>는 <code class="language-plaintext highlighter-rouge">Car</code> 타입의 프로토콜을 가집니다. 필요한 속성이 같은 두 개의 차이는 무엇일까요? 바로 <code class="language-plaintext highlighter-rouge">확장성</code>입니다. <code class="language-plaintext highlighter-rouge">FeatureOfCar</code>에는 <code class="language-plaintext highlighter-rouge">FeatureOfCar</code> 구조체 타입만 올 수 있습니다. 반면, <code class="language-plaintext highlighter-rouge">Car</code>에는 <code class="language-plaintext highlighter-rouge">Car</code>를 따르는 어떠한 객체든 올 수 있습니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">protocol</span> <span class="kt">Car</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">A</span><span class="p">:</span> <span class="kt">Car</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span>
  <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">mileage</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">B</span><span class="p">:</span> <span class="kt">Car</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span>
<span class="p">}</span>
<span class="kd">struct</span> <span class="kt">MiniCooper2</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">feature</span><span class="p">:</span> <span class="kt">Car</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="kt">A</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">b</span> <span class="o">=</span> <span class="kt">B</span><span class="p">(</span><span class="nv">mileage</span><span class="p">:</span> <span class="mi">5</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">car1</span> <span class="o">=</span> <span class="kt">MiniCooper2</span><span class="p">(</span><span class="nv">feature</span><span class="p">:</span> <span class="n">a</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">car2</span> <span class="o">=</span> <span class="kt">MiniCooper2</span><span class="p">(</span><span class="nv">feature</span><span class="p">:</span> <span class="n">b</span><span class="p">)</span></code></pre></figure>

<p>위의 코드를 살펴보면 <code class="language-plaintext highlighter-rouge">feature</code>의 자리에는 클래스가 오든 구조체가 오든 <code class="language-plaintext highlighter-rouge">Car</code>를 따르는 무엇이든 올 수 있습니다. 이것이 프로토콜의 다형성 개념입니다.</p>

<div class="message">
  프로토콜의 다형성이란 해당 프로토콜 타입에 그 프로토콜을 따르는 타입의 객체는 무엇이든 올 수 있는 개념입니다.
</div>

<p>이 개념은 앞서 잠깐 언급한 것처럼, value type의 확장에 있어서 상당히 중요합니다. value type은 reference type과 다르게 상속이라는 개념이 없습니다. 그래서 value type 객체들이 동일한 특징을 갖게 만들려면 동일한 프로퍼티나 메소드를 모두 갖추고 있어야 했습니다. 하지만, 이제 프로토콜을 통해 value type은 자신이 모든 기능을 구현하지 않고도 확장이 가능해졌습니다. 요약하면, struct와 protocol로 class의 역할을 모두 대체할 수 있는 가능성이 생긴 것입니다.</p>

<blockquote>
  <p>value type의 확장은 애플에서 제시한 Protocol Oriented Programming의 근간이 됩니다. 이 주제는 다음 글에서 다룰 예정입니다.</p>
</blockquote>

<h2 id="5-delegation">5. Delegation</h2>

<p>프로토콜이 데이터 타입으로 쓰이는 특징은 iOS에서 많이 사용되는 <code class="language-plaintext highlighter-rouge">Delegate</code> 패턴의 기반이 됩니다. <code class="language-plaintext highlighter-rouge">Delegation</code>이라는 영어 단어는 자신이 해야하는 무언가를 다른 사람에게 위임하는 것을 의미합니다. 가이드북에 서술된 정의는 아래와 같습니다.</p>

<div class="message">
Delegation is a design pattern that enables a class or structure to hand off(or delegate) some of its responsibilities to an instance of another type.
</div>

<p>Delegate 패턴에서 하나의 객체가 자신의 책임을 위임한다는 것은 책임을 전가 받은 객체로 자신이 구현해야 하는 것들(프로퍼티, 메소드)을 위임하는 것을 의미합니다. 예를 들어 VC라는 <code class="language-plaintext highlighter-rouge">ViewController</code>가 있고, VC가 <code class="language-plaintext highlighter-rouge">CLLocationDelegate</code>(B)의 기능을 사용하고 싶다고 생각해보겠습니다. 이 때, VC는 B를 자신이 직접 구현하지 않고 다른 객체에 위임할 수 있습니다.(이와 관련된 자주 쓰는 <code class="language-plaintext highlighter-rouge">tableView.delegate=self</code>와 같은 표현은 뒤에서 다룹니다.) 즉, B를 구현해놓은 <code class="language-plaintext highlighter-rouge">LocationManager: CLLocationDelegate</code>(C)같은 형태의 객체를 만들면 VC가 이것을 가져다 쓸 수 있는 것입니다. 심지어, VC는 C가 어떻게 일을 처리하는 객체인지 몰라도 됩니다. 그저 C가 B의 요구사항을 만족하기 위해 필요한 모든 프로퍼티나 메소드를 구현하기만 했으면 됩니다. 이처럼 delegate 프로토콜을 통해 기능 구현의 책임을 다른 객체로 위임하는 것을 객체의 책임이 캡슐화되었다고 표현합니다.</p>

<div class="message">
  프로토콜 타입을 프로퍼티로 가지는 A 객체는 그 자리에 오는 B 객체가 프로퍼티나 메소드들이 어떻게 작성되어 있는지 모릅니다.(캡슐화) 하지만, A는 프로토콜 타입 프로퍼티에 오는 B가 그 프로토콜을 따른다라는 사실은 알고 있습니다. 그렇기 때문에 A는 B의 프로퍼티나 메소드를 호출할 수 있게 됩니다.
</div>

<p>앞서서 사용했던 자동차 예제를 다시 가져와 보겠습니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// 중복되는 코드는 일부 생략하였습니다.</span>
<span class="kd">enum</span> <span class="kt">CarState</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">running</span>
    <span class="k">case</span> <span class="n">stop</span>
<span class="p">}</span>
<span class="kd">struct</span> <span class="kt">FeatureOfCar</span><span class="p">:</span> <span class="kt">Car</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">mileage</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">maxSpeed</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">var</span> <span class="nv">engineType</span><span class="p">:</span> <span class="kt">Fuel</span>
    <span class="k">var</span> <span class="nv">navigation</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>

    <span class="k">var</span> <span class="nv">stateOfCar</span><span class="p">:</span> <span class="kt">CarState</span> <span class="p">{</span>
        <span class="k">didSet</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"자동차의 상태가 변경됩니다."</span><span class="p">,</span> <span class="k">self</span><span class="o">.</span><span class="n">stateOfCar</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">isRunning</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">mileage</span> <span class="o">+=</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">MiniCooper</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">feature</span><span class="p">:</span> <span class="kt">Car</span>
    <span class="k">var</span> <span class="nv">delegate</span><span class="p">:</span> <span class="kt">CarDelegate</span><span class="p">?</span>
<span class="p">}</span>

<span class="kd">protocol</span> <span class="kt">CarDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">carDidStarted</span><span class="p">(</span><span class="nv">car</span><span class="p">:</span> <span class="kt">Car</span><span class="p">)</span>
    <span class="kd">func</span> <span class="nf">carDidStopped</span><span class="p">(</span><span class="nv">car</span><span class="p">:</span> <span class="kt">Car</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">StateOfCar</span><span class="p">:</span> <span class="kt">CarDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">carDidStopped</span><span class="p">(</span><span class="nv">car</span><span class="p">:</span> <span class="kt">Car</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">var</span> <span class="nv">car</span> <span class="o">=</span> <span class="n">car</span>
        <span class="n">car</span><span class="o">.</span><span class="n">stateOfCar</span> <span class="o">=</span> <span class="o">.</span><span class="n">stop</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"자동차가 멈춤니다.</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">carDidStarted</span><span class="p">(</span><span class="nv">car</span><span class="p">:</span> <span class="kt">Car</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">var</span> <span class="nv">car</span> <span class="o">=</span> <span class="n">car</span>
        <span class="n">car</span><span class="o">.</span><span class="n">stateOfCar</span> <span class="o">=</span> <span class="o">.</span><span class="n">running</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"자동차에 시동이 걸렸습니다.</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>위의 미니쿠퍼 예제에서 자동차의 주행 여부와 현재 주행 상태에 대해서 알 수 있는 <code class="language-plaintext highlighter-rouge">CarDelegate</code>를 추가하였습니다. <code class="language-plaintext highlighter-rouge">CarDelegate</code>의 역할은 자동차에 시동이 걸린 시점, 시동이 꺼진 시점을 반환하는 메소드를 가지고 있습니다. <code class="language-plaintext highlighter-rouge">MiniCooper</code> 구조체에는 새로운 프로퍼티인 <code class="language-plaintext highlighter-rouge">delegate</code>만 추가되었고, 자동차의 시동이 걸린(꺼진) 시점을 알 수 있는 메소드를 위한 코드는 하나도 작성되어 있지 않습니다. 그렇지만 <code class="language-plaintext highlighter-rouge">delegate</code> 프로퍼티가 <code class="language-plaintext highlighter-rouge">CarDelegate</code> 타입이기 때문에 적절한 인스턴스만 해당 프로퍼티에 넣어주면 자동차의 시동이 걸린(꺼진) 시점을 <code class="language-plaintext highlighter-rouge">miniCooper</code> 인스턴스로부터 알 수 있게 됩니다.</p>

<p>앞서서 Protocol의 타입에서 설명한 것을 다시 떠올려보면, 이 <code class="language-plaintext highlighter-rouge">delegate</code> 프로퍼티에는 <code class="language-plaintext highlighter-rouge">CarDelegate</code>을 따르는 어떤 인스턴스이든 전부 올 수 있습니다. 이제 <code class="language-plaintext highlighter-rouge">MiniCooper</code>에게 필요한 것은 자신의 <code class="language-plaintext highlighter-rouge">delegate</code> 변수를 채워줄 인스턴스입니다. 여기서는 그 인스턴스를 위해 만든 객체가 <code class="language-plaintext highlighter-rouge">StateOfCar</code>입니다. <code class="language-plaintext highlighter-rouge">StateOfCar</code>는 <code class="language-plaintext highlighter-rouge">CarDelegate</code>를 따르기 때문에 <code class="language-plaintext highlighter-rouge">MiniCooper</code>의 <code class="language-plaintext highlighter-rouge">delegate</code> 변수 자리에 올 수 있는 자격을 지니고 있습니다. <code class="language-plaintext highlighter-rouge">StateOfCar</code>에 적절한 <code class="language-plaintext highlighter-rouge">CarDelegate</code>의 필수 요건을 채웠기 때문에 컴파일 에러는 나지 않습니다.</p>

<p>이제 이 코드의 사용에 대해 알아보겠습니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">miniCooperFeature</span> <span class="o">=</span> <span class="kt">FeatureOfCar</span><span class="p">(</span><span class="nv">mileage</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">maxSpeed</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="nv">engineType</span><span class="p">:</span> <span class="kt">Fuel</span><span class="o">.</span><span class="n">oil</span><span class="p">,</span> <span class="nv">navigation</span><span class="p">:</span> <span class="s">"카카오 네비"</span><span class="p">,</span> <span class="nv">stateOfCar</span><span class="p">:</span> <span class="o">.</span><span class="n">stop</span><span class="p">)</span>

<span class="c1">// 1</span>
<span class="k">var</span> <span class="nv">miniCooper</span> <span class="o">=</span> <span class="kt">MiniCooper</span><span class="p">(</span><span class="nv">feature</span><span class="p">:</span> <span class="n">miniCooperFeature</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="c1">// 2</span>
<span class="k">var</span> <span class="nv">state</span> <span class="o">=</span> <span class="kt">StateOfCar</span><span class="p">()</span>

<span class="c1">// 3</span>
<span class="n">miniCooper</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">state</span>

<span class="c1">// 4</span>
<span class="n">miniCooper</span><span class="o">.</span><span class="n">delegate</span><span class="p">?</span><span class="o">.</span><span class="nf">carDidStarted</span><span class="p">(</span><span class="nv">car</span><span class="p">:</span> <span class="n">miniCooper</span><span class="o">.</span><span class="n">feature</span><span class="p">)</span>
<span class="n">miniCooper</span><span class="o">.</span><span class="n">delegate</span><span class="p">?</span><span class="o">.</span><span class="nf">carDidStopped</span><span class="p">(</span><span class="nv">car</span><span class="p">:</span> <span class="n">miniCooper</span><span class="o">.</span><span class="n">feature</span><span class="p">)</span>

<span class="c1">// print</span>
<span class="c1">// 자동차의 상태가 변경됩니다. running</span>
<span class="c1">// 자동차에 시동이 걸렸습니다.</span>
<span class="c1">//</span>
<span class="c1">// 자동차의 상태가 변경됩니다. stop</span>
<span class="c1">// 자동차가 멈춤니다.</span></code></pre></figure>

<ol>
  <li>앞선 경우에서처럼 <code class="language-plaintext highlighter-rouge">miniCooper</code> 인스턴스를 생성하였습니다. 이 때는 <code class="language-plaintext highlighter-rouge">delegate</code>를 없는 상태로 인스턴스를 생성하였습니다.</li>
  <li><code class="language-plaintext highlighter-rouge">CarDelegate</code>를 따르는 <code class="language-plaintext highlighter-rouge">StateOfCar</code> 구조체 인스턴스를 <code class="language-plaintext highlighter-rouge">state</code>로 생성하였습니다.</li>
  <li><code class="language-plaintext highlighter-rouge">state</code>는 <code class="language-plaintext highlighter-rouge">CarDelegate</code>를 따르기 때문에 <code class="language-plaintext highlighter-rouge">miniCooper</code>의 <code class="language-plaintext highlighter-rouge">delegate</code> 프로퍼티에 할당될 수 있습니다.</li>
  <li>이제 <code class="language-plaintext highlighter-rouge">miniCooper</code>는 자신이 직접 <code class="language-plaintext highlighter-rouge">CarDelegate</code>를 구현하지 않고, <code class="language-plaintext highlighter-rouge">StateOfCar</code>를 통해 <code class="language-plaintext highlighter-rouge">CarDelegate</code>의 프로퍼티나 메소드를 사용할 수 있게 되었습니다. 심지어, delegate 안에 구현된 값으로 <code class="language-plaintext highlighter-rouge">miniCooper</code> 인스턴스의 값도 변경할 수 있습니다.</li>
</ol>

<blockquote>
  <p>miniCooper는 CarState의 변화에 대한 코드를 직접 작성하지 않고, delegate 프로퍼티를 가지는 것만으로 그 기능을 확장하였습니다. 반대로 state는 자신이 구현하도록 위임 받은 기능을 CarDelegate를 따르며 구현하였습니다. 이와 같은 delegation(위임)을 통해 책임을 전가하는 프로토콜을 작성하는 것이 delegate 디자인 패턴입니다.</p>
</blockquote>

<h5 id="delegate-재사용하기">Delegate 재사용하기</h5>

<p>Delegate 패턴의 가장 큰 장점 중 하나는 기능을 재사용할 수 있는 단위로 분할하여 코드를 작성할 수 있다는 점입니다. 앞의 자동차 예제를 다시 들고 와보겠습니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">var</span> <span class="nv">miniCooper</span> <span class="o">=</span> <span class="kt">MiniCooper</span><span class="p">(</span><span class="nv">feature</span><span class="p">:</span> <span class="n">miniCooperFeature</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="k">var</span> <span class="nv">state</span> <span class="o">=</span> <span class="kt">StateOfCar</span><span class="p">()</span>
<span class="n">miniCooper</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">state</span>

<span class="kd">struct</span> <span class="kt">A8</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">feature</span><span class="p">:</span> <span class="kt">Car</span>
    <span class="k">var</span> <span class="nv">delegate</span><span class="p">:</span> <span class="kt">CarDelegate</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">color</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">a8Feature</span> <span class="o">=</span> <span class="kt">FeatureOfCar</span><span class="p">(</span><span class="nv">mileage</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="nv">maxSpeed</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="nv">engineType</span><span class="p">:</span> <span class="kt">Fuel</span><span class="o">.</span><span class="n">oil</span><span class="p">,</span> <span class="nv">navigation</span><span class="p">:</span> <span class="s">"네이버 지도"</span><span class="p">,</span> <span class="nv">stateOfCar</span><span class="p">:</span> <span class="o">.</span><span class="n">running</span><span class="p">)</span>
<span class="k">var</span> <span class="nv">a8</span> <span class="o">=</span> <span class="kt">A8</span><span class="p">(</span><span class="nv">feature</span><span class="p">:</span> <span class="n">a8Feature</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="n">state</span><span class="p">,</span> <span class="nv">color</span><span class="p">:</span> <span class="s">"Silver"</span><span class="p">)</span></code></pre></figure>

<p>위의 코드에서는 <code class="language-plaintext highlighter-rouge">MiniCooper</code> 구조체와 <code class="language-plaintext highlighter-rouge">A8</code> 구조체 모두 <code class="language-plaintext highlighter-rouge">StateOfCar</code>를 <code class="language-plaintext highlighter-rouge">delegate</code>로 사용할 수 있습니다. 즉, <code class="language-plaintext highlighter-rouge">MiniCooper</code>, <code class="language-plaintext highlighter-rouge">A8</code> 구조체 각각에 <code class="language-plaintext highlighter-rouge">CarDelegate</code> 메소드를 작성하는 것이 아니라, <code class="language-plaintext highlighter-rouge">StateOfCar</code>를 재사용한 것입니다.</p>

<h4 id="uitableviewdatasource의-delegate-패턴">UITableViewDataSource의 delegate 패턴</h4>

<p>이제 위의 개념을 통해 UITableView를 사용할 때, 소위 말해서 <code class="language-plaintext highlighter-rouge">tableView.dataSource = self</code>라는 코드가 어떤 의미를 담고 있는지 파악할 수 있습니다. 먼저 <code class="language-plaintext highlighter-rouge">UITableView</code>에는 어떤 변수들이 선언되어 있는지 살펴보면 다음과 같습니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// 일부만 가져왔습니다.</span>
<span class="kd">@available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">2.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span>
<span class="kd">open</span> <span class="kd">class</span> <span class="kt">UITableView</span> <span class="p">:</span> <span class="kt">UIScrollView</span><span class="p">,</span> <span class="kt">NSCoding</span><span class="p">,</span> <span class="kt">UIDataSourceTranslating</span> <span class="p">{</span>
    <span class="k">weak</span> <span class="kd">open</span> <span class="k">var</span> <span class="nv">dataSource</span><span class="p">:</span> <span class="kt">UITableViewDataSource</span><span class="p">?</span>

    <span class="k">weak</span> <span class="kd">open</span> <span class="k">var</span> <span class="nv">delegate</span><span class="p">:</span> <span class="kt">UITableViewDelegate</span><span class="p">?</span>

    <span class="kd">@available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">10.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span>
    <span class="k">weak</span> <span class="kd">open</span> <span class="k">var</span> <span class="nv">prefetchDataSource</span><span class="p">:</span> <span class="kt">UITableViewDataSourcePrefetching</span><span class="p">?</span>

    <span class="kd">@available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">11.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span>
    <span class="k">weak</span> <span class="kd">open</span> <span class="k">var</span> <span class="nv">dragDelegate</span><span class="p">:</span> <span class="kt">UITableViewDragDelegate</span><span class="p">?</span>

    <span class="kd">@available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">11.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span>
    <span class="k">weak</span> <span class="kd">open</span> <span class="k">var</span> <span class="nv">dropDelegate</span><span class="p">:</span> <span class="kt">UITableViewDropDelegate</span><span class="p">?</span>
<span class="p">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">dataSource</code> 변수는 <code class="language-plaintext highlighter-rouge">UITableView</code> 클래스 안에 들어 있는 변수입니다.(<code class="language-plaintext highlighter-rouge">dataSource</code>뿐만 아니라 다른 <code class="language-plaintext highlighter-rouge">delegate</code>, <code class="language-plaintext highlighter-rouge">prefetchDataSource</code> 등도 같은 형태를 취하고 있는 것을 확인할 수 있습니다.) <code class="language-plaintext highlighter-rouge">dataSource</code>는 <code class="language-plaintext highlighter-rouge">UITableViewDataSource</code> 타입으로 <code class="language-plaintext highlighter-rouge">UITableViewDataSource</code>를 따르는 객체는 무엇이든 올 수 있습니다.</p>

<p>이제 ViewController를 살펴보겠습니다.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// 1</span>
<span class="kd">class</span> <span class="kt">VC</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="kt">UITableViewDataSource</span> <span class="p">{</span>

    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="o">!</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>

        <span class="c1">// 2</span>
        <span class="n">tableView</span><span class="o">.</span><span class="n">dataSource</span> <span class="o">=</span> <span class="k">self</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">numberOfRowsInSection</span> <span class="nv">section</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">cellForRowAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UITableViewCell</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">UITableViewCell</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<ol>
  <li><code class="language-plaintext highlighter-rouge">VC</code> 클래스는 흔히 사용되는 <code class="language-plaintext highlighter-rouge">UIViewController</code>로 <code class="language-plaintext highlighter-rouge">UITableViewDataSource</code>를 따릅니다. 그렇기 떄문에 <code class="language-plaintext highlighter-rouge">numberOfRowsInSection</code>과 <code class="language-plaintext highlighter-rouge">cellForRowAt</code>을 필수적으로 구현해주어야 합니다.</li>
  <li>앞서 살펴보았듯이, <code class="language-plaintext highlighter-rouge">UITableView</code> 안에는 <code class="language-plaintext highlighter-rouge">dataSource</code>라는 변수가 <code class="language-plaintext highlighter-rouge">UITableViewDataSource</code> 타입으로 선언되어 있었습니다. 여기서 <code class="language-plaintext highlighter-rouge">self</code>는 <code class="language-plaintext highlighter-rouge">VC</code>를 지칭하는 것으로 <code class="language-plaintext highlighter-rouge">VC</code>가 <code class="language-plaintext highlighter-rouge">UITableViewDataSource</code>를 따르고 있기 때문에, 해당 <code class="language-plaintext highlighter-rouge">dataSource</code>는 <code class="language-plaintext highlighter-rouge">VC</code>(self)에 구현된 dataSource 메소드(<code class="language-plaintext highlighter-rouge">numberOfRowsInSection</code>과 <code class="language-plaintext highlighter-rouge">cellForRowAt</code>)들과 연결됩니다.</li>
</ol>

<blockquote>
  <p>참고로 UITableViewController는 UITableViewController dataSource와 delegate이 Interface Builder에서 설정되어 있기 때문에 따로 dataSource를 설정하지 않아도 됩니다.</p>
</blockquote>

<hr />

<h2 id="참고자료">참고자료</h2>
<ul>
  <li>Apple Inc. The Swift Programming Language (Swift 4) - Protocol</li>
  <li><a href="https://www.raywenderlich.com/148448/introducing-protocol-oriented-programming">Introducing Protocol-Oriented Programming in Swift 3 - raywenderlich</a></li>
</ul>


<div class="related">
  
  
  
  
  
  

  

    
    

    

    

  

    
    

    

    
      
        
        <h2>읽어 볼만한 다른 글</h2>
        
      <ul class="related-posts">
      
        <li>
          <h3>
            <a href="/articles/2022-04/swift_async_await">
              Swift Async Await
              <small>08 Apr 2022</small>
            </a>
            <small> 
            <div class="tag-chips">
              <a class="tag-link" href="/tags/#Swift">
                Swift
              </a>
            </div>
           
            <div class="tag-chips">
              <a class="tag-link" href="/tags/#Language">
                Language
              </a>
            </div>
          </small>
          </h3>
        </li>
      </li>
      
      
    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    

  

    
    

    

    
      
        <li>
          <h3>
            <a href="/articles/2019-03/atomic">
              atomic/non atomic
              <small>01 Mar 2019</small>
            </a>
            <small> 
            <div class="tag-chips">
              <a class="tag-link" href="/tags/#Swift">
                Swift
              </a>
            </div>
           
            <div class="tag-chips">
              <a class="tag-link" href="/tags/#Language">
                Language
              </a>
            </div>
          </small>
          </h3>
        </li>
      </li>
      
      
    

  

    
    

    

    
      
        <li>
          <h3>
            <a href="/articles/2019-02/swift-init-class-deep">
              Swift init 2부
              <small>06 Feb 2019</small>
            </a>
            <small> 
            <div class="tag-chips">
              <a class="tag-link" href="/tags/#Swift">
                Swift
              </a>
            </div>
           
            <div class="tag-chips">
              <a class="tag-link" href="/tags/#Language">
                Language
              </a>
            </div>
          </small>
          </h3>
        </li>
      </li>
      
      
    

  

    
    

    

    
      
        <li>
          <h3>
            <a href="/articles/2019-02/swift-init-basic">
              Swift init 1부
              <small>05 Feb 2019</small>
            </a>
            <small> 
            <div class="tag-chips">
              <a class="tag-link" href="/tags/#Swift">
                Swift
              </a>
            </div>
           
            <div class="tag-chips">
              <a class="tag-link" href="/tags/#Language">
                Language
              </a>
            </div>
          </small>
          </h3>
        </li>
      </li>
      
      
        
  </ul>

  
</div>


<script>
  
  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    // dark mode
    
  }
</script>
<script src="https://utteranc.es/client.js"
        repo="hcn1519/hcn1519.github.io"
        issue-term="og:title"
        label="gets Comments 🙌"
        theme=github-dark
        crossorigin="anonymous"
        async>
</script>

<div class="back-home">
    <a href="">< Home</a>
  </div>
</div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="/public/js/sidebarHamburger.js"></script>
  </body>
</html>
