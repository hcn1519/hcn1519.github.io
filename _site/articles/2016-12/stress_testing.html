<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Stress Testing에 대하여 &middot; Changnam
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>프로그래밍에 관하여 글을 쓰는 블로그입니다.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about">About</a>
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/categories/">Categories</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/tags/">Tags</a>
        
      
    

    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2017. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="" title="Home">Changnam</a>
            <small>Developer's Lab</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Stress Testing에 대하여</h1>
  <span class="post-date">21 Dec 2016</span>
  <p>&nbsp;문제를 해결하는 알고리즘이 실제로 모든 경우에 대해 귀납적으로(모든 경우에 맞는지 확인하는 방법을 통해) 맞는지 확인하는 방법으로 <code>Stress Testing</code>이라는 것이 있습니다. 테스트의 컨셉은 간단합니다. 무한루프를 돌려서 조건에 맞는 랜덤한 input값을 주고, 모든 값에 대해 올바른 답을 출력하는지 확인하는 것입니다. 예시를 통해서 알아 보겠습니다.</p>

<p>&nbsp;아래 예제는 주어진 숫자들 중 두 개를 선택하여, 가장 큰 값을 출력하는 코드입니다. 작동하는 순서는 다음과 같습니다.</p>
<ol>
<li>먼저 콘솔창에서 배열의 크기를 입력합니다.</li>
<li>다음으로 배열에 들어갈 숫자들을 입력합니다.</li>
<li>입력된 숫자들 중 가장 큰 두 개를 곱해서 최댓값을 출력합니다.</li>
</ol>
<p><img src="https://dl.dropbox.com/s/c8ph0eung4v4e9q/test.png" /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// MaxPairwiseProduct.java</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MaxPairwiseProduct</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="kt">long</span> <span class="nf">getMaxPairwiseProduct</span><span class="o">(</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kt">long</span> <span class="n">n</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="o">++</span><span class="n">j</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">*</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">&gt;</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">*</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">static</span> <span class="kt">long</span> <span class="nf">MaxPairwiseProductFast</span><span class="o">(</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">numbers</span><span class="o">){</span>
      <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>

      <span class="kt">int</span> <span class="n">maxIndex1</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
        <span class="k">if</span><span class="o">((</span><span class="n">maxIndex1</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">||</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">maxIndex1</span><span class="o">)</span> <span class="o">)</span>
          <span class="n">maxIndex1</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>

      <span class="kt">int</span> <span class="n">maxIndex2</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
        <span class="k">if</span><span class="o">((</span><span class="n">i</span> <span class="o">!=</span> <span class="n">maxIndex1</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">maxIndex2</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">maxIndex2</span><span class="o">)))</span>
          <span class="n">maxIndex2</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>

      <span class="c1">// System.out.println("index : " + maxIndex1 + " " + maxIndex2);</span>
      <span class="k">return</span> <span class="o">(</span><span class="kt">long</span><span class="o">)(</span><span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">maxIndex1</span><span class="o">)</span> <span class="o">*</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">maxIndex2</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">FastScanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FastScanner</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLong</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">getMaxPairwiseProduct</span><span class="o">(</span><span class="n">numbers</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">MaxPairwiseProductFast</span><span class="o">(</span><span class="n">numbers</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kd">class</span> <span class="nc">FastScanner</span> <span class="o">{</span>
        <span class="n">BufferedReader</span> <span class="n">br</span><span class="o">;</span>
        <span class="n">StringTokenizer</span> <span class="n">st</span><span class="o">;</span>

        <span class="n">FastScanner</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">stream</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">stream</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">String</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">st</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">st</span><span class="o">.</span><span class="na">hasMoreTokens</span><span class="o">())</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">st</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringTokenizer</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="kt">long</span> <span class="nf">nextLong</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="n">next</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="kt">int</span> <span class="nf">nextInt</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">next</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<p>&nbsp;위의 코드에서 main을 보시면 2가지 메소드(<code>getMaxPairwiseProduct</code>와 <code>MaxPairwiseProductFast</code>)가 있습니다. 먼저 getMaxPairwiseProduct은 배열에서 두 개의 elements를 뽑아서 최댓값을 업데이트하는 형식의 메소드입니다. 다음으로 MaxPairwiseProductFast는 배열을 2번 도는데, 1번 째에 최댓값을 찾고, 2번 째에 처음에 뽑은 값을 제외한 것들 중의 최댓값을 뽑아서 결과로 리턴하는 메소드입니다. 동일한 일을 하는 메소드이지만, 속도 상으로 보면 getMaxPairwiseProduct는 O(n^2)이고, MaxPairwiseProductFast는 O(n)이기 때문에 MaxPairwiseProductFast가 훨씬 빠릅니다.</p>
<p>&nbsp;자, 그런데 실제로 두 메소드가 같은 일을 하는지는 확인해볼 필요가 있습니다. 값 몇 개 넣어보고 확인하는 것이 아니라, 주어진 조건 내에서 항상 작동하는지 여부를 테스트해볼 필요가 있는 것이죠. 여기서 사용되는 것이 <code>Stress Testing</code>입니다.(여기서는 조건을 배열 크기는 2&lt;=n&lt;=100이고, 배열 안에 들어갈 수 있는 숫자의 범위는 0&lt;=n&lt;=100,000로 설정하겠습니다.)</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Stress testing을 위해 변경한 main</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
      <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">rand</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">100</span><span class="o">)+</span><span class="mi">2</span><span class="o">;</span> <span class="c1">// 배열 크기 랜덤값 입력</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">k</span><span class="o">);</span>

      <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>

      <span class="kt">long</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
      <span class="kt">long</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">100000L</span><span class="o">;</span>
      <span class="n">Random</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">k</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
        <span class="n">a</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">x</span><span class="o">+((</span><span class="kt">long</span><span class="o">)(</span><span class="n">r</span><span class="o">.</span><span class="na">nextDouble</span><span class="o">()*(</span><span class="n">y</span><span class="o">-</span><span class="n">x</span><span class="o">))));</span> <span class="c1">//랜덤한 값을 배열에 집어 넣기</span>

      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">)+</span> <span class="s">" "</span><span class="o">);</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>

      <span class="kt">long</span> <span class="n">res1</span> <span class="o">=</span> <span class="n">getMaxPairwiseProduct</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
      <span class="kt">long</span> <span class="n">res2</span> <span class="o">=</span> <span class="n">MaxPairwiseProductFast</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>

      <span class="k">if</span><span class="o">(</span><span class="n">res1</span> <span class="o">!=</span> <span class="n">res2</span><span class="o">){</span> <span class="c1">//두 메소드에서 나온 값이 맞는지 확인</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Wrong Answer : "</span> <span class="o">+</span> <span class="n">res1</span> <span class="o">+</span> <span class="s">", "</span><span class="o">+</span> <span class="n">res2</span><span class="o">);</span>
        <span class="k">break</span><span class="o">;</span>
      <span class="o">}</span> <span class="k">else</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"OK"</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>&nbsp;위의 while문은 무한루프로서 두 메소드에서 나온 값이 실제로 같은 값인지 체크합니다. 둘이 다른 값이라면, Wrong Answer를 뿜습니다. 둘이 실제로 같은 값이라면, 계속 OK를 찍으면서 무한루프를 돌겠죠? 확인해보면 아래와 같습니다.</p>

<p><img src="https://dl.dropbox.com/s/jnf7qflwlte5r2u/test2.png" /></p>

<p>&nbsp;캡처상으로는 보여드리는데 한계가 있지만 무한루프를 돌고 있습니다. 주어진 값 내에서는 두 메소드가 동일한 작업을 하는 것을 확인할 수 있습니다.</p>

<blockquote>
  <p>내용 출처 : Coursera, Algorithmic Toolbox by University of California, San Diego &amp; Higher School of Economics(week1)의 강의내용을 개인적으로 정리한 자료입니다.</p>
</blockquote>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/articles/2017-02/swift_structAndClass">
            Swift의 Struct와 Class
            <small>01 Feb 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/articles/2017-01/swift_classBasic">
            Swift Class 기본
            <small>30 Jan 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/articles/2017-01/OOP_class_and_object_java">
            OOP - Class와 Object
            <small>24 Jan 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
